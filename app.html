<html>
<head>
    <title>Pragma-git</title>
    
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script src="app.js"></script>
    

    <!-- Drop folder border-->
    <style>
        #content { border: 3px solid #dddddd; }
        #content.hover  { border: 3px dashed #333; }
    </style>


</head>


<body>

    
    <!-- Top titlebar -->    
    
    <div id="top-titlebar" class="top-titlebar" style="background-color: rgb(122, 124, 124);">
                
        <!-- Icon About  --> 
        <div class="about-icon"> 
            <img id="about-icon"    height="17" width="17"  
                onclick="_callback('clicked-about');" 
                onmouseover="updateImageUrl('about-icon', 'images/questionmark_hover.png');" 
                onmouseout= "updateImageUrl('about-icon', 'images/questionmark.png');" 
                src="images/questionmark.png">

        </div>
            

        <div id="top-titlebar-text" class="top-titlebar-text">
            
            <!-- Text Repo  --> 
            <div id="top-titlebar-repo-text" class="top-titlebar-repo-text" 
                onclick="_callback('clicked-repo')" 
                onmouseover="document.getElementById('top-titlebar-repo-text').setAttribute('style','color: #aaaaaa');" 
                onmouseout="document.getElementById('top-titlebar-repo-text').setAttribute('style','color: #ffffff');" >
            </div>
            
            <!-- Text Branch  --> 
            <div id="top-titlebar-branch-text" class="top-titlebar-branch-text" 
                onclick="_callback('clicked-branch')" 
                onmouseover="document.getElementById('top-titlebar-branch-text').setAttribute('style','color: #aaaaaa');" 
                onmouseout="document.getElementById('top-titlebar-branch-text').setAttribute('style','color: #ffffff');" >
            </div>  

 
        </div>     

        <!-- NOTE : set absolute positions in style.css -->
 
                                      
        <!-- Icon Stash  -->                             
        <div class="top-titlebar-stash-icon">
            <img id="top-titlebar-stash-icon"   height="17" width="auto" 
                onclick="_callback('clicked-stash-button')" 
                onmouseover="updateImageUrl('top-titlebar-stash-icon', 'images/stash_hover.png');" 
                onmouseout= "updateImageUrl('top-titlebar-stash-icon', 'images/stash.png');" 
                src="images/stash.png">
        </div> 
        
                                             
        <!-- Icon Stash pop  -->                             
        <div class="top-titlebar-stash_pop-icon">
            <img id="top-titlebar-stash_pop-icon"   height="17" width="auto" 
                onclick="_callback('clicked-stash_pop-button')" 
                onmouseover="updateImageUrl('top-titlebar-stash_pop-icon', 'images/stash_pop_hover.png');" 
                onmouseout= "updateImageUrl('top-titlebar-stash_pop-icon', 'images/stash_pop.png');" 
                src="images/stash_pop.png">
        </div> 
 
        <!-- Icon Branch  -->                             
        <div class="top-titlebar-branch-icon">
            <img id="top-titlebar-branch-icon"   height="17" width="17" 
                onclick="document.getElementById('branchNameInputDialog').showModal();" 
                onmouseover="updateImageUrl('top-titlebar-branch-icon', 'images/branch_hover.png');" 
                onmouseout= "updateImageUrl('top-titlebar-branch-icon', 'images/branch.png');" 
                src="images/branch.png">
        </div> 
                
                                                 
        <!-- Icon Merge  -->                             
        <div class="top-titlebar-merge-icon">
            <img id="top-titlebar-merge-icon"   height="17" width="17" 
                onclick="_callback('clicked-merge-button')" 
                onmouseover="updateImageUrl('top-titlebar-merge-icon', 'images/merge_hover.png');" 
                onmouseout= "updateImageUrl('top-titlebar-merge-icon', 'images/merge.png');" 
                src="images/merge.png">
        </div> 
                
                        
        <!-- Icon Pull  --> 
        <div class="top-titlebar-pull-icon">
            <img id="top-titlebar-pull-icon" height="17" width="17" 
                onclick="_callback('clicked-pull-button')" 
                onmouseover="updateImageUrl('top-titlebar-pull-icon', 'images/pull_hover.png');" 
                onmouseout= "updateImageUrl('top-titlebar-pull-icon', 'images/pull.png');" 
                src="images/pull.png">
        </div>   

                   
        <!-- Icon Push  -->         
        <div class="top-titlebar-push-icon">
            <img id="top-titlebar-push-icon"   height="17" width="17" 
                onclick="_callback('clicked-push-button')" 
                onmouseover="updateImageUrl('top-titlebar-push-icon', 'images/push_hover.png');" 
                onmouseout= "updateImageUrl('top-titlebar-push-icon', 'images/push.png');" 
                src="images/push.png">
        </div> 
    

        
        <!-- Top right icons  -->           
        <div class="top-titlebar-close-field">  
                    
            <!-- Icon Minimize  -->                     
            <img id="top-titlebar-minimize-icon"    height="17" width="17" 
                onclick="_callback('clicked-minimize-button')" 
                onmouseover="updateImageUrl('top-titlebar-minimize-icon', 'images/minimize_hover.png');" 
                onmouseout= "updateImageUrl('top-titlebar-minimize-icon', 'images/minimize.png');" 
                src="images/minimize.png">
 
            
            <!-- Icon Close  -->              
            <img id="top-titlebar-close-icon" 
                onclick="_callback('clicked-close-button')" 
                onmouseover="updateImageUrl('top-titlebar-close-icon', 'images/button_close_hover.png');" 
                onmouseout= "updateImageUrl('top-titlebar-close-icon', 'images/button_close.png');" 
                src="images/button_close.png">
        </div>
        
          
        <div class="top-titlebar-divider"></div> 
        
    </div>



    <!-- Content -->      

    <div id="content">
        <div id="inner-content">
                    
            <table id="outer_table">
                <tr>
                    <!-- History arrows  --> 
                    <td>
                        <table id="arrow_table">               
                        <tr>
                            <td>
                                <img id="up-arrow"  height="17" width="17" 
                                onclick="_callback( 'clicked-up-arrow')" 
                                onmouseover="updateImageUrl('up-arrow', 'images/up-arrow_hover.png');" 
                                onmouseout="updateImageUrl('up-arrow', 'images/up-arrow.png');" 
                                src="images/up-arrow.png">
                            </td> 
                        </tr>            
                        <tr>
                            <td>
                                <img id="down-arrow"  height="17" width="17" 
                                onclick="_callback( 'clicked-down-arrow')"  
                                onmouseover="updateImageUrl('down-arrow', 'images/down-arrow_hover.png');" 
                                onmouseout="updateImageUrl('down-arrow', 'images/down-arrow.png');" 
                                src="images/down-arrow.png">
                            </td> 
                        </tr>
                        </table>
                    </td>
                    
                    <!-- Message textarea  --> 
                    <td class="message_column">
                        <textarea class="message" id="message" onkeyup="_callback( 'message_key_up');" ></textarea>
                    </td>
                    <!-- Store button  --> 
                    <td>
                        <button id="store-button" onclick="_callback('clicked-store-button')"  disabled >Store</button>
                    </td>
                </tr>
                
                <!-- Collapsable html output  --> 
                <tr id="output_row" style="visibility:collapse">
                    <td></td>
                    <td>
                        <div id="output_text">
                            dasdfasfdas
                        </div>
                        
                    </td>
                    <td></td>
                </tr>
            </table>


        </div>
    </div>



    <!-- Bottom titlebar -->    
    
    <div id="bottom-titlebar" class="bottom-titlebar" style="background-color: rgb(122, 124, 124);">
        
        <!-- Icon Folder  -->  
        <div class="bottom-titlebar-folder-icon">
            <img id="bottom-titlebar-folder-icon"  height="17" width="17"
                onclick="_callback('clicked-folder')" 
                onmouseover="updateImageUrl('bottom-titlebar-folder-icon', 'images/folder_hover.png');" 
                onmouseout="updateImageUrl('bottom-titlebar-folder-icon', 'images/folder.png');" 
                src="images/folder.png">
            </div>
            
 
         <!-- Text Status  -->     
        <div id="bottom-titlebar-text" class="bottom-titlebar-text" 
                onclick="_callback('clicked-status-text')">
            </div>

        <!-- Icon Settings  -->  
        <div class="bottom-titlebar-settings-field">
            <img id="bottom-titlebar-settings-icon"  height="17" width="17"
                onclick="_callback('clicked-settings')"
                onmouseover="updateImageUrl('bottom-titlebar-settings-icon', 'images/settings_hover.png');" 
                onmouseout="updateImageUrl('bottom-titlebar-settings-icon', 'images/settings.png');" 
                src="images/settings.png">
            </div>
        
        <div class="bottom-titlebar-divider"></div>
    </div>
    
    
<!--          -->    
<!-- Dialogs  -->   
<!--          -->   

<!--  General alert dialog  --> 

    <dialog id="alertDialog" style="width:50%;background-color:#C00;border:1px dotted black;">  
        <p> 
            <div id='alertTitle'></div><br>  
            <div id='alertMessage'></div>  
        </p>  
        <button id="no"
            onclick="document.getElementById('alertDialog').close();selectedBranch='';">
            OK
        </button>  
    </dialog>  
                
       

    <!-- Branch selection -->   
  
    <dialog id="branchNameInputDialog" style="background-color:yellow;border:1px dotted black;">  
        <b>Create branch from this commit</b><br>
            <br>
            <textarea id="branchNameTextarea" 
                rows="2" 
                cols="30" 
                placeholder="name of new branch"
                onkeyup= "_callback('newBranchNameKeyUp', this);"></textarea>
            <br>

            <br>
        
        <button  id="newBranchNameEntered"
            onclick="document.getElementById('branchNameInputDialog').close();_callback('addBranchButtonPressed', this.value);document.getElementById('branchNameTextarea').value='';">
            OK
        </button>           
        <button id="cancelBranchNameInputDialog"
            onclick="document.getElementById('branchNameInputDialog').close();document.getElementById('branchNameTextarea').value='';">
            Cancel
        </button>  
    </dialog>      



    <!-- Git not installed alert -->   
  
    <dialog id="gitNotInstalledAlert" style="background-color:#C00;border:1px dotted black;">  
        <b>ERROR -- Cannot find "git" !</b><br>
            Please make sure "git" is installed. <br>
            See manual for help (<img style='vertical-align:middle;' src="images/questionmark_black.png"  height="17" width="17">  in top-left corner of the main window)<br>
            <br>
        
        <button 
            onclick="document.getElementById('gitNotInstalledAlert').close();">
            OK
        </button>   
        
    </dialog>      



    <!-- Detached head dialog -->   
  
    <dialog id="detachedHeadDialog" style="background-color:#C00;border:1px dotted black;">  
        <b>WARNING -- detached HEAD !</b><br>
            You've created work in an old revision. <br>
            1) Keep work : a temporary branch will be created<br>
            2) Delete : drop work done on old revision<br>
            <br>
        
        <button id="tempBranchDetachedDialog" value="Temp_Branch"
            onclick="document.getElementById('detachedHeadDialog').close();_callback('detachedHeadDialog',this.value);">
            1) Temp Branch
        </button>   
        <button id="deleteDetachedDialog" value="Delete"
            onclick="document.getElementById('detachedHeadDialog').close();_callback('detachedHeadDialog', this.value);">
            2) Delete
        </button>     
        <button id="cancelDetachedDialog" value="Cancel"
            onclick="document.getElementById('detachedHeadDialog').close();_callback('detachedHeadDialog', this.value);">
            Cancel
        </button>  
    </dialog>  


    <!-- Dropped file is not a repo -->   
  
    <dialog id="doYouWantToInitializeRepoDialog" style="background-color:yellow;border:1px dotted black;">  
        <b>WARNING -- the dropped folder is not a repository.</b><br>
            Do you want to initialize this folder as a git repository ? <br>
            <br>
        
        <button id="initializeRepoDialogOK" 
            onclick="document.getElementById('doYouWantToInitializeRepoDialog').close();_callback('initializeRepoOK');">
            Initialize
        </button>   
        <button id="initializeRepoDialogCancel" 
            onclick="document.getElementById('doYouWantToInitializeRepoDialog').close();localState.droppedRepoFolder=''; "> <!-- Forget dropped folder -->  
            Cancel
        </button>     

    </dialog>  

</body>

    
    <!-- Drop folder initiate script-->    
    <script>
    
        //Same as $(document).ready();
        function ready(fn) {
            if (document.readyState != 'loading'){
                fn();
            } else {
                document.addEventListener('DOMContentLoaded', fn);
            }
        }
    
        //When the page has loaded, run this code
        ready( function(){
            // prevent default behavior from changing page on dropped file
            window.ondragover = function(e) { e.preventDefault(); return false };
            
            // NOTE: ondrop events WILL NOT WORK if you do not "preventDefault" in the ondragover event!!
            window.ondrop = function(e) { e.preventDefault(); return false };
        
            const holder = document.getElementById('content');
            holder.ondragover = function () { this.className = 'hover'; return false; };
            holder.ondragleave = function () { this.className = ''; return false; };
            
            holder.ondrop = function(e) {  _callback('file-dropped', e); return false }; // See app.js
        
        });
    </script>
</html>
